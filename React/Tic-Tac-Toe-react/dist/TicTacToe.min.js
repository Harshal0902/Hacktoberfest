!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.TicTacToe=t(require("react")):e.TicTacToe=t(e.react)}(this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function(e,t,r){for(var n=!0;n;){var o=e,a=t,i=r;n=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,a);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(i)}var s=Object.getPrototypeOf(o);if(null===s)return;e=s,t=a,r=i,n=!0,u=s=void 0}},s=r(3),c=n(s),f=r(1),d=n(f),h=r(2),p=n(h),v=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.board=new d.default(e.width),this.state={player:1,freezeBoard:!1,winner:!1}}return a(t,e),u(t,[{key:"nextPlayer",value:function(){return 1===this.state.player?2:1}},{key:"move",value:function(e,t,r,n){this.board.move(e,t,r);var o=this.board.checkWin();o?this.setState({winner:o,freezeBoard:!0}):n()}},{key:"playerMove",value:function(e){var t=this,r=e.target.dataset.cell.split("_"),n=i(r,2),o=n[0],a=n[1],u=0===this.board.getCell(o,a);u&&this.move(o,a,this.state.player,function(){t.props.singlePlayer?t.setState({player:t.nextPlayer(),freezeBoard:!0},t.aiMove):t.setState({player:t.nextPlayer()})})}},{key:"aiMove",value:function(){var e=this,t=p.default.move(this.board,this.state.player),r=i(t,2),n=r[0],o=r[1];setTimeout(function(){e.move(n,o,e.state.player,function(){e.setState({player:e.nextPlayer(),freezeBoard:!1})})},200)}},{key:"aiInit",value:function(){if(this.props.singlePlayer){var e=Math.floor(2*Math.random())+1;1===e&&this.aiMove()}}},{key:"reset",value:function(){this.board=new d.default(this.props.width),this.setState({player:1,freezeBoard:!1,winner:!1}),this.aiInit()}},{key:"componentDidMount",value:function(){this.aiInit()}},{key:"render",value:function(){var e=this,t=this.board.board,r=void 0;if(this.state.winner){var n=this.state.winner>2?"It's a tie!":"Player "+this.state.winner+" wins!";r=c.default.createElement("div",{className:"announcement"},c.default.createElement("p",null,n),c.default.createElement("button",{onClick:this.reset.bind(this)},"Reset"))}var o=t.map(function(t,r){var n=t.map(function(t,n){var o=t>0?1===t?"cell-p1":"cell-p2":"cell",a=r+"_"+n,i=void 0;return e.state.freezeBoard||(i=e.playerMove.bind(e)),c.default.createElement("div",{className:o,key:n,onClick:i,"data-cell":a})});return c.default.createElement("div",{className:"row",key:r},n)});return c.default.createElement("div",{className:"grid"},o,r)}}]),t}(c.default.Component);v.propTypes={width:c.default.PropTypes.number},v.defaultProps={width:3},t.default=v,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){if(r(this,e),"number"!=typeof t)throw new Error("Width must be a number");if(t<3||t>10)throw new Error("Width cannot be less than 3 or greater than 10");this.board=[];for(var n=0;n<t;n++){for(var o=[],a=0;a<t;a++)o.push(0);this.board.push(o)}}return n(e,[{key:"getDim",value:function(){return this.board.length}},{key:"getCell",value:function(e,t){return this.board[e][t]}},{key:"move",value:function(e,t,r){this.board[e][t]=r}},{key:"getEmptyCells",value:function(){return this.board.map(function(e,t){return e.map(function(e,r){if(0===e)return[t,r]})}).reduce(function(e,t){return e.concat(t)}).filter(function(e){return"undefined"!=typeof e})}},{key:"checkWin",value:function(){for(var t=!1,r=this.getDim(),n=0;n<r;n++){var o=this.board[n];if(e.allEqual(o)&&o[0]>0)return t=o[0]}for(var n=0;n<r;n++){for(var a=[],i=0;i<r;i++)a.push(this.getCell(i,n));if(e.allEqual(a)&&a[0]>0)return t=a[0]}for(var u={left:[],right:[]},l=0;l<r;l++)u.left.push(this.getCell(l,l)),u.right.push(this.getCell(r-l-1,l));for(var s in u){var c=u[s];if(e.allEqual(c)&&c[0]>0)return t=c[0]}var f=!this.board.reduce(function(e,t){return e.concat(t)}).some(function(e){return 0===e});return f&&(t=3),t}}],[{key:"allEqual",value:function(e){return!e.some(function(e,t,r){return e!==r[0]})}}]),e}();t.default=o,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=r(1),i=n(a),u={numTrials:1e3,trial:function(e){for(var t=this.trialBoard.getEmptyCells();this.trialBoard.checkWin()===!1;){var r=o(t[Math.floor(Math.random()*t.length)],2),n=r[0],a=r[1];this.trialBoard.move(n,a,e),t=this.trialBoard.getEmptyCells(),e=1===e?2:1}},updateScores:function(e){var t=this,r=this.trialBoard.checkWin(),n=2,o=1;r&&r<3&&!function(){var a=1===e?2:1;t.scores.forEach(function(i,u){i.forEach(function(i,l){t.trialBoard.getCell(u,l)===e?e===r?t.scores[u][l]+=n:t.scores[u][l]-=n:t.trialBoard.getCell(u,l)===a&&(e===r?t.scores[u][l]-=o:t.scores[u][l]+=o)})})}()},getBestMove:function(e){var t=this,r=void 0,n=e.getEmptyCells().map(function(e){var r=o(e,2),n=r[0],a=r[1];return{cell:[n,a],score:t.scores[n][a]}}).sort(function(e,t){return e.score<t.score}).filter(function(e,t,r){return e.score===r[0].score});return r=1===n.length?n[0].cell:n[Math.floor(Math.random()*n.length)].cell},clone:function e(t){var e=new i.default(t.getDim());return e.board=t.board.map(function(e){return e.slice()}),e},move:function(e,t){this.scores=new i.default(e.getDim()).board;for(var r=0;r<this.numTrials;r++)this.trialBoard=this.clone(e),this.trial(t),this.updateScores(t);return this.getBestMove(e)}};t.default=u,e.exports=t.default},function(t,r){t.exports=e}])});